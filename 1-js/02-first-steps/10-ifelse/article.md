# การตรวจสอบเงื่อนไขด้วย: if, '?'

บางครั้ง เราจำเป็นต้องดำเนินการต่างๆ ตามเงื่อนไขที่แตกต่างกัน

ในการทำเช่นนั้น เราสามารถใช้คำสั่ง `if` และตัวดำเนินการแบบเงื่อนไข (conditional operator) `?` ซึ่งเรียกอีกอย่างว่าโอเปอเรเตอร์ "เครื่องหมายคำถาม (question mark)"

## คำสั่ง "if"

คำสั่ง `if(...)` จะประเมินเงื่อนไขในวงเล็บและรันบล็อกของโค้ดหากผลลัพธ์เป็น `จริง`

ตัวอย่าง:

```js run
let year = prompt('In which year was ECMAScript-2015 specification published?', '');

*!*
if (year == 2015) alert( 'You are right!' );
*/!*
```

ในตัวอย่างข้างต้น เงื่อนไขคือการตรวจความเท่ากันแบบง่ายๆ (`year == 2015`) แต่เราสามารถทำได้ซับซ้อนกว่านี้มาก

หากเราต้องการดำเนินการมากกว่าหนึ่งคำสั่ง เราต้องล้อมบล็อคโค้ดของเราไว้ในวงเล็บปีกกา:

```js
if (year == 2015) {
  alert( "That's correct!" );
  alert( "You're so smart!" );
}
```

เราแนะนำให้ล้อมบล็อคโค้ดด้วยวงเล็บปีกกา `{}` ทุกครั้งที่ใช้คำสั่ง `if` แม้ว่าจะมีเพียงคำสั่งเดียวให้ดำเนินการก็ตาม การทำเช่นนี้จะช่วยให้โค้ดอ่านง่ายขึ้น

## การแปลงค่าชนิดอื่นเป็นบูลีน (Boolean conversion)

คำสั่ง `if (…)` จะประเมินนิพจน์ (expression) ในวงเล็บและแปลงค่าใดๆก็ตามเป็นบูลีน

ทบทวนความจำได้จากบทนี้ <info:type-conversions>:

- เลข `0`, สตริงว่าง `""`, `null` `undefined` และ `NaN` จะกลายเป็น `false` เราจะเรียกค่าเหล่านี้ว่า "falsy"
- ส่วนที่เหลือจะเป็น `true` เราจะเรียกค่าเหล่านี้ส่า "truly"

ดังนั้นโค้ดภายใต้เงื่อนไขนี้จะไม่ทำงาน:

```js
if (0) { // 0 คือ falsy
  ...
}
```

...และภายใต้เงื่อนไขนี้โค้ดจะทำงานส่วนที่อยู่ในบล็อค (วงเล็บปีกกา) ต่อไป

```js
if (1) { // 1 คือ truthy
  ...
}
```

นอกจากนี้เรายังสามารถส่งค่าบูลีนที่ประเมินล่วงหน้า (pre-evaluated) ไปยังคำสั่ง `if` ได้ดังนี้:

```js
let cond = (year == 2015); // บรรทัดนี้หาก year เป็น 2015 จะเป็น `true` หากไม่จะเป็น `false` เก็บไว้ในตัวแปร

if (cond) {
  ...
}
```

## คำสั่ง "else"

คำสั่ง `if` อาจมีบล็อก `else` เป็นตัวเลือกขึ้นมา หากเงื่อนไขในคำสั่ง `if` เป็นเท็จ โปรแกรมจะทำงานในบล็อคของ `else` แทน

ตัวอย่าง:
```js run
let year = prompt('In which year was the ECMAScript-2015 specification published?', '');

if (year == 2015) {
  alert( 'You guessed it right!' );
} else {
  alert( 'How can you be so wrong?' ); // any value except 2015
}
```

## มีมากกว่าสองเงื่อนไขใช้ "else if"

บางครั้ง เราต้องการทดสอบเงื่อนไขมากกว่าสอง รูปแบบประโยค `else if`

ตัวอย่าง:

```js run
let year = prompt('In which year was the ECMAScript-2015 specification published?', '');

if (year < 2015) {
  alert( 'Too early...' );
} else if (year > 2015) {
  alert( 'Too late' );
} else {
  alert( 'Exactly!' );
}
```

ตามโค้ดด้ายบน JavaScript จะตรวจสอบ `year < 2015` ก่อน หากเป็น falsy จะเข้าสู่เงื่อนไขถัดไป `year > 2015` หากเงืื่อนไขยังเป็นเท็จ ก็จะแสดง `alert` ออกมา
มีบล็อค `else if` ได้ตามที่ใจต้องการ ส่วนบล็อค `else` เป็นทางเลือกจะมีหรือไม่มีก็ได้

## ตัวดำเนินการแบบเงื่อนไข (conditional operator) "?"

บางครั้ง เราต้องกำหนดตัวแปรตามเงื่อนไขที่กำหนด

ตัวอย่าง:

```js run no-beautify
let accessAllowed;
let age = prompt('How old are you?', '');

*!*
if (age > 18) {
  accessAllowed = true;
} else {
  accessAllowed = false;
}
*/!*

alert(accessAllowed);
```

ตัวดำเนินการที่เรียกว่าแบเงื่อนไข หรือ เครื่องหมายคำถาม ช่วยให้เราเขียนโค้ดสั้นได้กว่า

ตัวดำเนินการนี้จะใช้เครื่องหมายคำถาม `?` บางทีเราก็เรีนยกมันว่า "ไตรภาค (ternary)" เพราะมันมีตัวถูกดำเนินการสามตัว ตัวดำเนินการแบบเงื่อนไขเป็นตัวดำเนินการเพียงตัวเดียวใน JavaScript ที่ใช้ตัวถูกดำเนินการถึงสามตัว โดยปกติจะมีตัวถูกดำเนินการสองตัวเช่น `1 + 1` และ `true && false`

วากยสัมพันธ์ (syntax):
```js
let result = condition ? value1 : value2;
```

ตัวแปร `เงื่อนไข` จะถูกประเมิน: หากเป็นจริง `value1` จะถูกส่งกลับ มิฉะนั้น `value2` จะถูกส่งกลับ

ตัวอย่าง:

```js
let accessAllowed = (age > 18) ? true : false;
```

ในทางเทคนิค เราจะไม่ใส่วงเล็บล้อม `age > 18` ก็ได้

ตัวอย่างนี้จะทำสิ่งเดียวกันกับตัวอย่างก่อนหน้านี้:

```js
// ตัวดำเนินการเปรียบเทียบ "age > 18" จะดำเนินการก่อน
// (จึงไม่จำเป็นต้องใส่วงเล็บ)
let accessAllowed = age > 18 ? true : false;
```

แต่วงเล็บทำให้โค้ดอ่านง่ายขึ้น เราจึงแนะนำให้ใส่ทุกครั้ง

````smart
ในตัวอย่างข้างต้น เราสามารถละตัวดำเนินการ ? ก็ได้ เนื่องจาก "age > 18" เป็นตัวดำเนิินการแบบเปรียบเทียบจะส่งค่ากลับมาเป็น "true/false" อยู่แล้ว:

```js
// ได้ผลลัพธ์เหมือนกัน
let accessAllowed = age > 18;
```
````

## สามารถใช้ '?' หลายตัวเพื่อกำหนดเงื่อนไขหลายแบบได้

ลำดับของตัวดำเนินการเครื่องหมายคำถาม `?` สามารถคืนค่าที่ขึ้นอยู่กับเงื่อนไขมากกว่าหนึ่งเงื่อนไขได้

ตัวอย่าง:
```js run
let age = prompt('age?', 18);

let message = (age < 3) ? 'Hi, baby!' :
  (age < 18) ? 'Hello!' :
  (age < 100) ? 'Greetings!' :
  'What an unusual age!';

alert( message );
```

ด้วยรูปประโยคที่ซับซ้อนแบบนี้ทำให้เราไม่สามารถเข้าใจได้ว่า โค้ดเหล่านี้ทำงานยังไงกันแน่ อย่าเพิ่งตื่นตระหนกไป เราค่อยๆกวาดสายตาและทำความเข้าใจไปทีละบรรทัด จะพบว่านี่เป็นการทดสอบเงื่อนไขธรรมดาๆเท่านั้น โดยมีลำดับการทำงานดังนี้

1. เครื่องหมายคำถามแรกตรวจสอบว่า `age < 3`
2. ถ้าเป็นจริง มันจะส่งคืน `'Hi, baby!'` มิฉะนั้น มันจะไปเช็คเงื่อนไขข้างหลัง '":"' ต่อ โดยตรวจสอบว่าตัวแปร `age < 18'` จริงหรือไม่
3. ถ้าเป็นจริง มันจะส่งคืน `'Hello!'`. มิฉะนั้น มันจะไปเช็คเงื่อนไขข้างหลัง '":"'ต่อ โดยตรวจสอบว่าตัวแปร  `age < 100` จริงหรือไม่
4. ถ้าเป็นจริง มันจะส่งคืน `'Greetings!'` หากยังเป็นเท็จและเนื่องจากเป็น '":"' ตัวสุดท้าย มันจึงส่งค่าหลัง '":"'  กลับมา ในที่นี้คือ `'What an unusual age!'`

ด้านล่างคือตัวอย่างหากเขียนเงื่อนไขด้านบนด้วยรูปประโยค `if..else` แทน:

```js
if (age < 3) {
  message = 'Hi, baby!';
} else if (age < 18) {
  message = 'Hello!';
} else if (age < 100) {
  message = 'Greetings!';
} else {
  message = 'What an unusual age!';
}
```

## Non-traditional use of '?'

บางครั้งเครื่องหมายคำถาม `?` ก็ถูกใช้แทน `if`:

```js run no-beautify
let company = prompt('Which company created JavaScript?', '');

*!*
(company == 'Netscape') ?
   alert('Right!') : alert('Wrong.');
*/!*
```

ขึ้นอยู่กับเงื่อนไข `company == 'Netscape'` หากเป็นจริงข้างหลัง `?` จะทำงาน `alert('Right!')` หากเป็นเท็จข้างหลัง `:` จะทำงาน `alert('Wrong.')`

เราไม่ได้กำหนดผลลัพธ์ให้กับตัวแปรที่นี่ แต่เรารันโค้ดที่แตกต่างกันขึ้นอยู่กับเงื่อนไข ดังนั้นหากเรา `console.log(company)` เราก็จะได้ค่า `undefined` ออกมา

**เราจึงไม่แนะนำให้ใช้ตัวดำเนินการเครื่องหมายคำถามในลักษณะนี้**

ด้วยความที่ตัวดำเนินการ `?` มันสั้นกว่า `if` มาก มันจึงทำให้โปรแกรมเมอร์หลายคนใช้ `?` มากกว่า `if` แต่เราก็ขอบอกว่า `?` อ่านยากกว่า `if` อีก

นี่คือตัวอย่างที่ใช้ `if` แทน `?`

```js run no-beautify
let company = prompt('Which company created JavaScript?', '');

*!*
if (company == 'Netscape') {
  alert('Right!');
} else {
  alert('Wrong.');
}
*/!*
```

ตาของเราจะกวาดโค้ดในแนวตั้ง โค้ดที่เป็นบล็อคหลายๆบรรทัด จะช่วยให้เราอ่านโค้ดเข้าใจได้ง่ายกว่าโค้ดที่เป็นแนวนอน

วัตถุประสงค์ของตัวดำเนินการเครื่องหมายคำถาม `?` คือการคืนค่าหนึ่งค่าหรืออีกค่าหนึ่งโดยขึ้นอยู่กับเงื่อนไข ทางเราขอร้องให้ใช้ถูกวัตถุประสงค์เพื่อหลัีกเลี่ยงข้อผิดพลาดที่อาจจะเกิดกับโปรแกรมได้ และใช้ `if` เมื่อมีหลายเงื่อนไขที่ต้องตรวจสอบแทน
