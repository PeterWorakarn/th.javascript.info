# โครงสร้างโค้ด

สิ่งแรกที่เราจะเริ่มศึกษากันจริงจังคือหน่วยของโค้ด (blocks of code)

## คำสั่ง (Statements)

คำสั่ง (Statements) คือโครงสร้างไวยากรณ์ที่ประกอบไปด้วยคำสั่งที่พร้อมให้คอมพิวเตอร์ดำเนินการ

เราเคยเห็นคำสั่ง (Statements) หน่ึงกันมาแล้วคือ `alert('Hello, world!')`, ซึ่งคำสั่งของมันก็คือให้แสดงข้อความ "Hello World!"

เราจะเขียนคำสั่ง (Statements) กี่ครั้งก็ได้ตามที่เราต้องการ และ คำสั่ง (Statements) มักจบด้วย semicolon เสมอ เพื่อแยกแต่ละคำสั่ง (Statements) ออกจากกัน คล้ายๆ full stop ในภาษาอังกฤษที่แบ่งประโยคออกจากกัน

ดั่งตัวอย่างเราแบ่ง "Hello" กับ "World" ออกมาเป็นสองข้อความ

```js run no-beautify
alert('Hello'); alert('World');
```

โดยปกติแล้ว เราจะเขียนแยกบรรทัดกันเพื่อให้โค้ดอ่านง่ายขึ้น

```js run no-beautify
alert('Hello');
alert('World');
```

## Semicolons [#semicolon]

การขึ้นบรรทัดใหม่ก็เหมือนมี semicolon อยู่ในตัว เมื่อเราแบ่งบรรทัดจึงมีหรือไม่มี semicolon ก็ได้

แบบนี้ก็ได้ผลเช่นเดียวกันกับด้านบน:

```js run no-beautify
alert('Hello')
alert('World')
```

จาวาสคริปต์จะตีความการขึ้นบรรทัดใหม่ว่าเป็น semicolon ในที่นี้เราเรียกว่า [การแทรก semicolon ให้อัตโนมัติ](https://tc39.github.io/ecma262/#sec-automatic-semicolon-insertion).

**ส่วนใหญ่การขึ้นบรรทัดใหม่คือจะแทรก semicolon ไปโดยปริยายด้วย แต่ก็ไม่ได้หมายความว่าจะเป็นแบบนั้นเสมอไป!**

บรรทัดใหม่แบบนี้ จาวาสคริปต์จะไม่ตีความว่าเป็น semicolon

```js run no-beautify
alert(3 +
1
+ 2);
```

โค้ดแสดงผล `6` เนื่องจาก JavaScript ไม่ได้ใส่ `;` ที่นี่เห็นได้ชัดว่าถ้าบรรทัดลงท้ายด้วยเครื่องหมายบวก `"+"` แสดงว่าเป็น "นิพจน์ที่ไม่สมบูรณ์" ดังนั้นเครื่องหมาย semicolons จะไม่ถูกแทรกลงไป และในกรณีนี้ ผลลัพธ์ก็ถูกต้องตามที่คาดไว้

**แต่ก็มีบางคำสั่งที่จาวาสคริปต์ได้ตีความผิดพลาดไป โดยจาวาสคริปต์มองว่าคำสั่งดังกล่าวจำเป็นต้องมี semicolon ด้วย;**

error หาเจอได้ยาก และยังแก้ไขได้ยากอีกด้วย

````smart header="An example of an error"
หากคุณอยากรู้ตัวอย่างที่เป็นรูปธรรมของข้อผิดพลาดดังกล่าว สามารถดูได้ที่โค้ดด้านล่าง

```js run
alert("Hello");

[1, 2].forEach(alert);
```

เราจะมาเรียน square brackets `[]` และ `forEach' ในภายหลัง สำหรับตอนนี้ เพียงจำผลลัพธ์ของการรันโค้ดจะได้ "สวัสดี" ตามด้วย "1" ตามด้วย "2"

ตอนนี้เราลองลบเครื่องหมาย `;` หลัง "alert" ออก:

```js run no-beautify
alert("Hello")

[1, 2].forEach(alert);
```

เมื่อเทียบกับโค้ดด้านบน ความแตกต่างมีเพียงตัวอักษรเดียวเท่านั้น: นั่นคือ `;` ที่ท้ายบรรทัดแรกหายไป

สมมติว่าเราเรียกใช้โค้ดชุดนี้ เฉพาะ "hello" รายการแรกเท่านั้นที่แสดง (และมีข้อผิดพลาด คุณอาจต้องเปิดคอนโซลเพื่อดู) ไม่มีตัวเลข "1" และ "2" แสดงผลออกมาด้วย

นั่นเป็นเพราะว่า JavaScript ไม่ใส่ `;` ก่อนวงเล็บเหลี่ยม `[...]` ดังนั้น โค้ดในตัวอย่างสุดท้ายจะถือเป็นคำสั่งเดียว

ด้านล่างคือโค้ดที่เอนจิ้นเห็น:

```js run no-beautify
alert("Hello")[1, 2].forEach(alert);
```

มันดูแปลกใช่มั้ย? ในกรณีนี้ เอนจิ้นดันรวม statement ที่แยกกันเป็นคำสั่งเดียว ดัะงนั้นเราจึงจำเป็นต้องใส่ `;` หลัง "alert" เพื่อให้โค้ดทำงานได้อย่างถูกต้อง

สิ่งนี้สามารถเกิดขึ้นได้ในสถานการณ์อื่นเช่นกัน
````

ในทางที่ดีเราจึงอยากแนะนำให้ใส่ semicolon เมื่อจบคำสั่งหนึ่งๆเสมอ แม้คำสั่งเหล่านั้นจะแยกการด้วยบรรทัดใหม่แล้วก็ตาม และกฎนี้ใช้กันอย่างกว้างขวางในชุมชนนักพัฒนา โปรดทราบอีกครั้งว่า *มันเป็นไปได้* ที่จะไม่ใส่ semicolon ลงไป แต่สำหรับมือใหม่ก็แนะนำให้ใส่ไว้จะปลอดภัยกว่า

## คอมเม้นต์

เมื่อเขียนโปรแกรมไปเรื่อยๆ ก็จะพบว่าโปรแกรมยิ่งทวีความซับซ้อนมากขึ้นเรื่อยๆ จึงจำเป็นต้องมี *comments* มาอธิบายว่าโค้ดที่เราเขียนทำงานอย่างไร

คอมเม้นสามารถเขียนลงไปส่วนไหนก็ได้ของสคริปต์ คอมเม้นจะไม่ส่งผลต่อการดำเนินงาน เพราะว่า เอนจินจะไม่สนใจคอมเม้นพวกนี้อยู่แล้ว

**คอมเม้นแบบบรรทัดเดียวจะใช้เครื่องหมาย forward slash `//`**

เราสามารถคอมเม้นทั้งบรรทัด หรือคอมเม้นด้านหลังคำสั่งก็ได้

แบบนี้:

```js run
// This comment occupies a line of its own
alert('Hello');

alert('World'); // This comment follows the statement
```

**คอมเม้นแบบหลายบรรทัด จะเริ่มต้นด้วย forward slash และเครื่องหมายดอกจัน `/*` และลงท้ายด้วย เครื่องหมายดอกจันและ forward slash `*/`**

แบบนี้:

```js run
/* An example with two messages.
This is a multiline comment.
*/
alert('Hello');
alert('World');
```

เอนจินไม่สนใจเนื้อหาภายในคอมเม้นต์ ต่อให้เราใส่จาวาสคริปต์ของเราไปภายในคอมเม้นก็จะไม่เกิดการรันคำสั่งใดๆ

หลายครั้ง เป็นประโยชน์อย่างมากที่ช่วยให้ไม่ต้องบางคำสั่งไม่ต้องดำเนินการ

```js run
/* Commenting out the code
alert('Hello');
*/
alert('World');
```

```smart header="ใช้คีย์ลัด!"
ใน editor ส่วนใหญ่มีคีย์ลัดเพื่อเอาไว้คอมเม้นต์โค้ด โดยกด `key:Ctrl+/` สำหรับคอมเม้นต์บรรทัดเดียว และ `key:Ctrl+Shift+/` สำหรับคอมเม้นต์หลายบรรทัด สำหรับผู้ใช้ Mac ให้ใชปุ่ม `key:Cmd` แทน `key:Ctrl` และ `key:Option` แทน `key:Shift`
```

````warn header="คอมเม้นต์ซ้อนคอมเม้นต์ไม่ได้"
ไม่ควรมี `/*...*/` ข้างในคอมเม้นต์แบบนี้ `/*...*/` อีกที

โค้ดแบบนี้จะพังด้วย error

```js run no-beautify
/*
  /* nested comment ?!? */
*/
alert( 'World' );
```
````

อย่าลังเลที่จะคอมเม้นต์โค้ดของตัวเอง

คอมเม้นเพิ่มบรรทัดของโค้ด แต่นั่นไม่ใช่ปัญหาเลย มีเครื่องมือมากมายที่ช่วยนำคอมเม้นเหล่านั้นออกจากโค้ด ก่อนเผยแพร่ออกสู่เซิฟเวอร์ที่ใช้งานจริง ดังนั้นอย่างกังวลที่จะใช้คอมเม้นโค้ด

ในภายหลังจะมีบทเรียนเกี่ยวกับ <info:code-quality> ที่จะช่วยอธิบายความสำคัญของคอมเม้นต์ และการเขียนคอมเม้นต์ที่ดีอีกด้วย
